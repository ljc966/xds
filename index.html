<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>打kunkun</title>

<style type="text/css">
img{cursor:url('images/mouse.ani');}
/* 添加音效控制样式 */
#soundControl {
  position: fixed;
  bottom: 20px;
  right: 20px;
  background: #ffcc00;
  padding: 10px;
  border-radius: 50%;
  cursor: pointer;
  box-shadow: 0 0 10px rgba(0,0,0,0.3);
  z-index: 100;
}
#soundControl i {
  font-size: 24px;
  color: #fff;
}
</style>
<!--此源码由星星的煌制作-->
	
  <!--如果想加入团队联系这个QQ:2904958418 -->


<script language="JavaScript">
var no1,no2,no3,no4;
var gameTime,spaceTime,stayTime;
var button1,button2;
var time;
var sum=0;
var mouse=0;

// 添加音效变量
var hitSound = new Audio();
hitSound.src = "https://assets.mixkit.co/sfx/preview/mixkit-retro-game-emergency-alarm-1000.mp3";
hitSound.volume = 0.7;

// 添加音效控制
var soundEnabled = true;

function toggleSound() {
  soundEnabled = !soundEnabled;
  var soundIcon = document.getElementById("soundIcon");
  if (soundEnabled) {
    soundIcon.className = "fas fa-volume-up";
    hitSound.volume = 0.7;
  } else {
    soundIcon.className = "fas fa-volume-mute";
    hitSound.volume = 0;
  }
}

function onGame(){
	init();
	no1=window.setInterval("showTime()",1000);	
	no2=setInterval("showImage()",1000);
}
function init(){
	gameTime=document.getElementById("gameTime");
	spaceTime=document.getElementById("spaceTime");
	stayTime=document.getElementById("stayTime");
	gameTime.disabled=true;
	spaceTime.disabled=true;
	stayTime.disabled=true;
	button1=document.getElementById("button1"); 
	button2=document.getElementById("button2");
	button1.disabled=true;
	button2.disabled=false;
	time=parseInt(gameTime.value)*60;
	sum=0;
	mouse=0;
}   
	
	
function showTime(){  
	document.getElementById("time").innerHTML=time;
	time-=1;
	if(time<=0){
		esc();
	}
	var str="打中："+mouse+"只  漏掉："+(sum-mouse)+"只"+"<br>"+" 总分："+sum*100+"  得分："+(mouse*100-(sum-mouse)*100);
	document.getElementById("score").innerHTML=str;
}
function showImage(){  
     var images=document.getElementsByName("image");
     var index=Math.floor(Math.random()*25);
     images[index].src="images/01.jpg";
	 sum+=1;
	 no3=setTimeout("stopImage("+index+")",parseInt(stayTime.value)*1000);
}    
function stopImage(index){
     
	 document.images[index].src="images/00.jpg";
	
}     
function leaveImage(o){
     
	 o.src="images/00.jpg";
	
}
function clickMouse(o){
      var str=o.src.substr(o.src.length-6,6);
	  if(str=="01.jpg"){
	   o.src="images/02.jpg";
	   mouse+=1;
	   
	   // 添加打击音效 - 修改位置1
	   if (soundEnabled) {
	     hitSound.currentTime = 0;
	     hitSound.play();
	   }
	   
	   no4=setInterval("leaveImage(o)",500);
	  }
}
function esc(){
	window.clearInterval(no1);
	window.clearInterval(no2);
	window.clearTimeout(no3);
	window.clearInterval(no4);
	gameTime.disabled=false;
	spaceTime.disabled=false;
	stayTime.disabled=false;
	button1.disabled=false;
	var images=document.getElementsByName("image");
	for(var i=0;i<images.length;i++){
		images[i].src="images/00.jpg";
	}
}
</script>
<!-- 添加字体图标 -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css">
</head>

<body >
<bgsound  src="images/bgsound.mp3" loop="-1">

<!-- 添加音效控制按钮 - 修改位置2 -->
<div id="soundControl" onclick="toggleSound()">
  <i id="soundIcon" class="fas fa-volume-up"></i>
</div>

<table align="center">
	<tr>
		<td><font color="#0066FF">游戏说明:</font></td>
	</tr>
	<tr>
		<td>
			<font color="#0066FF">点击"开始游戏"按钮，在下图中随机产生，消失前单击进行击打，<br>打中一次即可获得100的积分，没有打中，扣取100积分。快快行动吧，考验你的<br>反应和眼力！</font>
		</td>
	</tr>
	<tr align="right">
		
	</tr>
</table>

<br />
<br />

<table align="center" cellspacing="5">
	<tr>
		<td>
			<table cellspacing="3">
				<tr>
					<td>--游戏时间:--</td>
					<td><input type="text" width="6" id="gameTime" value="1"/> 分钟</td>
				</tr>
				<tr>
					<td>--倒计时间:--</td>
					<td><div id="time"></div></td>
				</tr>
				<tr>
					<td>--出现的时间间隔:--</td>
					<td><input type="text" width="6" id="spaceTime" value="1"/> 秒钟</td>
				</tr>
				<tr>
					<td>--停留时间:--</td>
					<td><input type="text" width="6" id="stayTime" value="1"/> 秒钟</td>
				</tr>
				<tr>
					<td>--得分情况:--</td>
					<td><div id="score"></div></td>
				</tr>
				<tr align="center">
					<td ><input type="button" value="开始游戏" id="button1" onclick="onGame()"/></td>
					<td><input type="button" value="退出游戏" id="button2" disabled onclick="esc()"/></td>
				</tr>
			</table>
		</td>
		<td>
			<table border="1"  cellspacing="3" bgcolor="white">
				<tr>
					<td><img src="images/00.jpg" name="image" onclick="clickMouse(this)"/></td>
					<td><img src="images/00.jpg" name="image" onclick="clickMouse(this)"/></td>
					<td><img src="images/00.jpg" name="image" onclick="clickMouse(this)"/></td>
					<td><img src="images/00.jpg" name="image" onclick="clickMouse(this)"/></td>
					<td><img src="images/00.jpg" name="image" onclick="clickMouse(this)"/></td>
				</tr>
				<tr>
					<td><img src="images/00.jpg" name="image" onclick="clickMouse(this)"/></td>
					<td><img src="images/00.jpg" name="image" onclick="clickMouse(this)"/></td>
					<td><img src="images/00.jpg" name="image" onclick="clickMouse(this)"/></td>
					<td><img src="images/00.jpg" name="image" onclick="clickMouse(this)"/></td>
					<td><img src="images/00.jpg" name="image" onclick="clickMouse(this)"/></td>
				</tr>
				<tr>
					<td><img src="images/00.jpg" name="image" onclick="clickMouse(this)"/></td>
					<td><img src="images/00.jpg" name="image" onclick="clickMouse(this)"/></td>
					<td><img src="images/00.jpg" name="image" onclick="clickMouse(this)"/></td>
					<td><img src="images/00.jpg" name="image" onclick="clickMouse(this)"/></td>
					<td><img src="images/00.jpg" name="image" onclick="clickMouse(this)"/></td>
				</tr>
				<tr>
					<td><img src="images/00.jpg" name="image" onclick="clickMouse(this)"/></td>
					<td><img src="images/00.jpg" name="image" onclick="clickMouse(this)"/></td>
					<td><img src="images/00.jpg" name="image" onclick="clickMouse(this)"/></td>
					<td><img src="images/00.jpg" name="image" onclick="clickMouse(this)"/></td>
					<td><img src="images/00.jpg" name="image" onclick="clickMouse(this)"/></td>
				</tr>
				<tr>
					<td><img src="images/00.jpg" name="image" onclick="clickMouse(this)"/></td>
					<td><img src="images/00.jpg" name="image" onclick="clickMouse(this)"/></td>
					<td><img src="images/00.jpg" name="image" onclick="clickMouse(this)"/></td>
					<td><img src="images/00.jpg" name="image" onclick="clickMouse(this)"/></td>
					<td><img src="images/00.jpg" name="image" onclick="clickMouse(this)"/></td>
				</tr>
			</table>
		</td>
	</tr>
</table>
<div style="text-align:center;">
</div>
<center>
<audio controls="controls"  autoplay="autoplay"  loop="loop">
  <source src="2.mp3" type="audio/mpeg">
Your browser does not support the audio element.
</source></audio>
</center>
</bgsound></body>
<head>
</html>
